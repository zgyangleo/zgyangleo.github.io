---
layout: post
title:  "灰度共生矩阵的计算"
date:   2019-5-29 04:55:01 +0800
categories: 图像处理
tag: 图像特征算子 灰度共生矩阵
---

* content
{:toc}



一个很简单的概念，被很多垃圾帖子说的很复杂，浪费了很多时间。不废话，直接开篇。

灰度共生矩阵，指的是一种通过研究灰度的空间相关特性来描述纹理的常用方法。由于纹理是由灰度分布在空间位置上反复出现而形成的，因而在图像空间中相隔某距离的两像素之间会存在一定的灰度关系，即图像中灰度的空间相关特性。

灰度共生矩阵定义为像素对的联合分布概率，是一个对称矩阵，它不仅反映图像灰度在相邻的方向、相邻间隔、变化幅度的综合信息，但也反映了相同的灰度级像素之间的位置分布特征，是计算纹理特征的基础。 设f(x,y)为一幅数字图像，其大小为M×N，灰度级别为Ng，则满足一定空间关系的灰度共生矩阵为：

                 P(i,j)=#｛(x1,y1),(x2,y2)∈M×N｜f(x1,y1)=i,f(x2,y2)=j｝

其中#(x)表示集合x中的元素个数，显然P为Ng×Ng的矩阵，若(x1,y1)与(x2,y2)间距离为d,两者与坐标横轴的夹角为θ，则可以得到各种间距及角度的灰度共生矩阵(i,j,d,θ)。其中元素(i,j)的值表示一个灰度为i，另一个灰度为j的两个相距为d的像素对在角的方向上出现的次数。经常，我们在使用中求0°、45°、90°和135°四个方向的共生矩阵，公式如下：

![共生矩阵]({{ '/styles/images/20190529/共生矩阵.jpg' | prepend: site.baseurl  }})

公式看起来很复杂，我将通过具体的一个例子来说明。下图是一个4×4的图像块，灰度级别0-3：

![图像块]({{ '/styles/images/20190529/图像块.jpg' | prepend: site.baseurl  }})

用数字表示图像块中元素的位置：

![位置表示]({{ '/styles/images/20190529/位置表示.jpg' | prepend: site.baseurl  }})

灰度矩阵为：

![灰度矩阵]({{ '/styles/images/20190529/灰度矩阵.jpg' | prepend: site.baseurl  }})

依次我们可以求得四个方向的矩阵为（这里距离d=1）：

![灰度矩阵1]({{ '/styles/images/20190529/灰度矩阵1.jpg' | prepend: site.baseurl  }})

对0°处的#（0,0）的计算做下说明：对于上图的图像块，存在(0,0)关系的有第一行的(1,1)、(1,2)和(1,2)、(1,1)，第二行有(2,1)、(2,2)和(2,2)、(2,1)，则其值为4；同理，对于#(1,0)有(1,3)、(1,2)和（2,,3)、(2,2)，则其值为2。
d=2时道理亦然。





